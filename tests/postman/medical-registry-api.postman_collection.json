{
  "info": {
    "_postman_id": "a80f3b13-5c2c-4042-85fc-5bd6c2c9c001",
    "name": "Medical Registry API",
    "description": "Integration tests that exercise the refactored medical registry API across users, admin, medecin, patient, consultation, diagnostics, seances, reevaluations, and utility endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    { "key": "jsonContentType", "value": "application/json" }
  ],
  "item": [
    {
      "name": "Users",
      "description": "CRUD and helper endpoints under /users",
      "item": [
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Accept", "value": "application/json" }
            ],
            "url": { "raw": "{{baseUrl}}/users", "host": ["{{baseUrl}}"], "path": ["users"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Body is array\", function () { pm.expect(pm.response.json()).to.be.an('array'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"integration-user-{{$timestamp}}\",\n  \"email\": \"integration.user+{{$timestamp}}@example.com\",\n  \"firstName\": \"Integration\",\n  \"lastName\": \"User\",\n  \"phone\": \"+213770000000\",\n  \"role\": \"ADMIN\",\n  \"pwd\": \"Sup3rS3cret!\"\n}",
              "options": { "raw": { "language": "json" } }
            },
            "url": { "raw": "{{baseUrl}}/users", "host": ["{{baseUrl}}"], "path": ["users"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "const json = pm.response.json();",
                  "pm.expect(json).to.have.property('id');",
                  "pm.environment.set('userId', json.id);",
                  "pm.environment.set('userEmail', json.email);"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User By Id",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Accept", "value": "application/json" }
            ],
            "url": { "raw": "{{baseUrl}}/users/{{userId}}", "host": ["{{baseUrl}}"], "path": ["users", "{{userId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Matches stored user\", function () { pm.expect(pm.response.json().id).to.eql(pm.environment.get('userId')); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated\",\n  \"lastName\": \"User\",\n  \"phone\": \"+213771234567\"\n}",
              "options": { "raw": { "language": "json" } }
            },
            "url": { "raw": "{{baseUrl}}/users/{{userId}}", "host": ["{{baseUrl}}"], "path": ["users", "{{userId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Phone updated\", function () { pm.expect(pm.response.json().phone).to.eql('+213771234567'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "url": { "raw": "{{baseUrl}}/users/{{userId}}", "host": ["{{baseUrl}}"], "path": ["users", "{{userId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 204\", function () { pm.response.to.have.status(204); });",
                  "pm.environment.unset('userId');"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Users By Role (Admin)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Accept", "value": "application/json" }
            ],
            "url": { "raw": "{{baseUrl}}/users/role/ADMIN", "host": ["{{baseUrl}}"], "path": ["users", "role", "ADMIN"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"All admins\", function () { pm.response.json().forEach(u => pm.expect(u.role).to.eql('ADMIN')); });"
                ]
              }
            }
          ]
        },
        {
          "name": "List Medecins via Users",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/users/medecins", "host": ["{{baseUrl}}"], "path": ["users", "medecins"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Contains userInfo snapshot\", function () { if (pm.response.json().length) { pm.expect(pm.response.json()[0]).to.have.property('userInfo'); } });"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin",
      "description": "Dedicated admin management endpoints",
      "item": [
        {
          "name": "Create Admin",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin-{{$timestamp}}\",\n  \"email\": \"admin+{{$timestamp}}@example.com\",\n  \"firstName\": \"Admin\",\n  \"lastName\": \"Test\",\n  \"pwd\": \"Sup3rS3cret!\"\n}",
              "options": { "raw": { "language": "json" } }
            },
            "url": { "raw": "{{baseUrl}}/admin", "host": ["{{baseUrl}}"], "path": ["admin"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "const json = pm.response.json();",
                  "pm.environment.set('adminId', json.id || json.keycloakId || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Admin By Email",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/admin/email/{{userEmail}}", "host": ["{{baseUrl}}"], "path": ["admin", "email", "{{userEmail}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200 or 404\", function () { pm.expect([200,404]).to.include(pm.response.code); });"
                ]
              }
            }
          ]
        },
        {
          "name": "List Admins",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/admin", "host": ["{{baseUrl}}"], "path": ["admin"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Each admin has role\", function () { pm.response.json().forEach(a => pm.expect(a.role).to.eql('ADMIN')); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Admin by Id",
          "request": {
            "method": "DELETE",
            "url": { "raw": "{{baseUrl}}/admin/{{adminId}}", "host": ["{{baseUrl}}"], "path": ["admin", "{{adminId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Allows delete or 404 if already removed\", function () { pm.expect([204,404]).to.include(pm.response.code); });",
                  "pm.environment.unset('adminId');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Medecins",
      "item": [
        {
          "name": "Create Medecin",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"dr-{{$timestamp}}\",\n  \"email\": \"dr+{{$timestamp}}@example.com\",\n  \"firstName\": \"Med\",\n  \"lastName\": \"Ecin\",\n  \"profession\": \"PARODONTAIRE\",\n  \"isSpecialiste\": true,\n  \"pwd\": \"Sup3rS3cret!\",\n  \"phone\": \"+213780000000\"\n}",
              "options": { "raw": { "language": "json" } }
            },
            "url": { "raw": "{{baseUrl}}/medecin", "host": ["{{baseUrl}}"], "path": ["medecin"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "const json = pm.response.json();",
                  "pm.environment.set('medecinId', json.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Medecin",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+213781234567\",\n  \"isSpecialiste\": false\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/medecin/{{medecinId}}", "host": ["{{baseUrl}}"], "path": ["medecin", "{{medecinId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Phone updated\", function () { pm.expect(pm.response.json().user.phone).to.eql('+213781234567'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "List Medecins",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/medecin", "host": ["{{baseUrl}}"], "path": ["medecin"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Response includes profession\", function () { if (pm.response.json().length) { pm.expect(pm.response.json()[0]).to.have.property('profession'); } });"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Medecin",
          "request": {
            "method": "DELETE",
            "url": { "raw": "{{baseUrl}}/medecin/{{medecinId}}", "host": ["{{baseUrl}}"], "path": ["medecin", "{{medecinId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Allows delete or 404\", function () { pm.expect([204,404]).to.include(pm.response.code); });",
                  "pm.environment.unset('medecinId');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Etudiants",
      "item": [
        {
          "name": "Create Etudiant",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"etd-{{$timestamp}}\",\n  \"firstName\": \"Etudiant\",\n  \"lastName\": \"Demo\",\n  \"email\": \"etd+{{$timestamp}}@example.com\",\n  \"niveau\": \"5\",\n  \"pwd\": \"Sup3rS3cret!\",\n  \"phone\": \"+213790000000\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/etudiant", "host": ["{{baseUrl}}"], "path": ["etudiant"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "pm.environment.set('etudiantId', pm.response.json().id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Etudiant",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"niveau\": \"6\",\n  \"phone\": \"+213791234567\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/etudiant/{{etudiantId}}", "host": ["{{baseUrl}}"], "path": ["etudiant", "{{etudiantId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Level updated\", function () { pm.expect(pm.response.json().niveau).to.eql(6); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Etudiant",
          "request": {
            "method": "DELETE",
            "url": { "raw": "{{baseUrl}}/etudiant/{{etudiantId}}", "host": ["{{baseUrl}}"], "path": ["etudiant", "{{etudiantId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Allows delete or 404\", function () { pm.expect([204,404]).to.include(pm.response.code); });",
                  "pm.environment.unset('etudiantId');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Patients & Actions",
      "item": [
        {
          "name": "Create Patient",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nom\": \"Doe\",\n  \"numeroDeDossier\": \"PT-{{$timestamp}}\",\n  \"prenom\": \"John\",\n  \"adresse\": \"123 Rue Example\",\n  \"tel\": \"+213555555555\",\n  \"motifConsultation\": \"ESTHETIQUE\",\n  \"hygieneBuccoDentaire\": \"BONNE\",\n  \"typeMastication\": \"BILATERALE\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/patient", "host": ["{{baseUrl}}"], "path": ["patient"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "pm.environment.set('patientId', pm.response.json().id);"
                ]
              }
            }
          ]
        },
        {
          "name": "List Patients",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/patient", "host": ["{{baseUrl}}"], "path": ["patient"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Array response\", function () { pm.expect(pm.response.json()).to.be.an('array'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Transfer Action",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"TRANSFER_ORTHO\",\n  \"date\": \"{{$isoTimestamp}}\",\n  \"medecinId\": \"{{medecinId}}\",\n  \"patientId\": \"{{patientId}}\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/actions", "host": ["{{baseUrl}}"], "path": ["actions"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "pm.environment.set('actionId', pm.response.json().id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Validate Transfer Action",
          "request": {
            "method": "PUT",
            "url": { "raw": "{{baseUrl}}/actions/validate-transfer-ortho/{{actionId}}", "host": ["{{baseUrl}}"], "path": ["actions", "validate-transfer-ortho", "{{actionId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.environment.unset('actionId');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Consultations & Diagnostiques",
      "item": [
        {
          "name": "Create Consultation",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"date\": \"{{$isoTimestamp}}\",\n  \"medecinId\": \"{{medecinId}}\",\n  \"patient\": {\n    \"nom\": \"Consult\",\n    \"numeroDeDossier\": \"CS-{{$timestamp}}\",\n    \"prenom\": \"Flow\",\n    \"adresse\": \"456 Rue Example\",\n    \"tel\": \"+213560000000\",\n    \"motifConsultation\": \"FONCTIONNELLE\",\n    \"hygieneBuccoDentaire\": \"MOYENNE\",\n    \"typeMastication\": \"UNILATERALE_ALTERNEE\"\n  }\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/consultation", "host": ["{{baseUrl}}"], "path": ["consultation"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "pm.environment.set('consultationId', pm.response.json().id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Add Diagnosis",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"ORTHODONTAL\",\n  \"text\": \"Initial diagnosis\",\n  \"medecinId\": \"{{medecinId}}\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/consultation/{{consultationId}}/diagnosis", "host": ["{{baseUrl}}"], "path": ["consultation", "{{consultationId}}", "diagnosis"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "pm.environment.set('diagnosisId', pm.response.json().id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Diagnosis",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Updated notes\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/consultation/diagnosis/{{diagnosisId}}", "host": ["{{baseUrl}}"], "path": ["consultation", "diagnosis", "{{diagnosisId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Text updated\", function () { pm.expect(pm.response.json().text).to.eql('Updated notes'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Consultation",
          "request": {
            "method": "DELETE",
            "url": { "raw": "{{baseUrl}}/consultation/{{consultationId}}", "host": ["{{baseUrl}}"], "path": ["consultation", "{{consultationId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 204\", function () { pm.response.to.have.status(204); });",
                  "pm.environment.unset('consultationId');",
                  "pm.environment.unset('diagnosisId');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Seances & Reevaluations",
      "item": [
        {
          "name": "Create Seance",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"ACTIVATION\",\n  \"date\": \"{{$isoTimestamp}}\",\n  \"patientId\": \"{{patientId}}\",\n  \"medecinId\": \"{{medecinId}}\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/seance", "host": ["{{baseUrl}}"], "path": ["seance"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "pm.environment.set('seanceId', pm.response.json().id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Reevaluation (multipart)",
          "request": {
            "method": "POST",
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "indiceDePlaque", "value": "35", "type": "text" },
                { "key": "indiceGingivale", "value": "10", "type": "text" },
                { "key": "patientId", "value": "{{patientId}}", "type": "text" },
                { "key": "medecinId", "value": "{{medecinId}}", "type": "text" },
                { "key": "date", "value": "{{$isoTimestamp}}", "type": "text" },
                { "key": "type", "value": "REEVALUATION", "type": "text" },
                { "key": "sondagePhoto", "type": "file", "src": "{{reevaluationImagePath}}" }
              ]
            },
            "url": { "raw": "{{baseUrl}}/reevaluation", "host": ["{{baseUrl}}"], "path": ["reevaluation"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 201\", function () { pm.response.to.have.status(201); });",
                  "pm.environment.set('reevaluationId', pm.response.json().id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Reevaluation",
          "request": {
            "method": "DELETE",
            "url": { "raw": "{{baseUrl}}/reevaluation/{{reevaluationId}}", "host": ["{{baseUrl}}"], "path": ["reevaluation", "{{reevaluationId}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 204\", function () { pm.response.to.have.status(204); });",
                  "pm.environment.unset('reevaluationId');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Utility",
      "item": [
        {
          "name": "List Enum Motifs",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/enum/motif-consultation", "host": ["{{baseUrl}}"], "path": ["enum", "motif-consultation"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
                  "pm.test(\"Array returned\", function () { pm.expect(pm.response.json()).to.be.an('array'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Password Change (no auth)",
          "auth": { "type": "noauth" },
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"newPassword\": \"Sup3rS3cret!\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/password-change/{{passwordTargetEmail}}", "host": ["{{baseUrl}}"], "path": ["password-change", "{{passwordTargetEmail}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Verify Email - Send",
          "auth": { "type": "noauth" },
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "{{jsonContentType}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"redirectUri\": \"https://example.com/verify\"\n}",
              "options": { "raw": { "language": "json" } }
            ],
            "url": { "raw": "{{baseUrl}}/verify-email/{{verifyEmail}}", "host": ["{{baseUrl}}"], "path": ["verify-email", "{{verifyEmail}}"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Handles email send responses\", function () { pm.expect([200,404]).to.include(pm.response.code); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Verify Email - Status",
          "auth": { "type": "noauth" },
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/verify-email/{{verifyEmail}}/status", "host": ["{{baseUrl}}"], "path": ["verify-email", "{{verifyEmail}}", "status"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Returns status\", function () { pm.expect([200,404]).to.include(pm.response.code); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Verify Email - Mark Verified",
          "request": {
            "method": "PUT",
            "url": { "raw": "{{baseUrl}}/verify-email/{{verifyEmail}}/mark-verified", "host": ["{{baseUrl}}"], "path": ["verify-email", "{{verifyEmail}}", "mark-verified"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Authenticated verification\", function () { pm.expect([200,404]).to.include(pm.response.code); });"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
